---
outline: [2, 3]
description: 了解如何使用控制面板管理 Olares 工作负载和配置。本指南涵盖项目和命名空间的概念、不同工作负载类型的管理以及通过详细仪表板监控资源使用情况。
---

# 管理工作负载和配置

工作负载是用于管理容器组副本的资源，负责对一个应用程序的多个容器组副本进行管理。本章节将介绍如何在 Olares 视图下，如何对不同工作负载（应用或服务）下的容器组进行管理。

:::tip 注意
Olares 成员仅能访问自己的命名空间，而 Olares 管理员可以访问所有用户和系统命名空间。
:::

## 项目及命名空间

在 Olares 的浏览视图中，**项目**与**命名空间**相结合，提供组织和隔离资源的两级划分：

![项目组织](/images/zh/manual/olares/controlhub-org.png#bordered)

- **项目**：按“用户”或“系统”维度对命名空间归类，方便在集群中快速定位所属用户或系统模块，如图中的 `xuejingjie089`。
- **命名空间**：项目下可包含多个命名空间，对应 Kubernetes 原生隔离单元，用于区分不同应用、组件或环境。
 
| 类别 | 命名空间前缀 | 说明                                                              |
|------|--------------|-----------------------------------------------------------------|
| **用户项目** | `app-<olares-id>` | 由市场安装的社区应用，如 `steamheadless-chenglin106`、`ollama-chenglin106` 等 |
| | `user-space-<olares-id>` | 系统内置应用：文件管理器、市场、控制面板、仪表盘、Vault 等                                |
| | `user-system-<olares-id>` | 与用户相关的系统守护进程：运行时组件、调度器、代理服务等                                    |
| **系统项目** | `System` | 集群级依赖：Kubernetes 核心、KubeSphere、Olares 平台组件，以及必要的硬件驱动            |

## 管理工作负载

在 Olares 中，**工作负载**代表运行于 Olares 集群的应用或服务，负责管理⼀个应⽤程序的一个或多个容器组。所有工作负载都部署在特定的命名空间内。

| 类型 | 典型场景                           | 特点                              |
|------|--------------------------------|---------------------------------|
| **部署 (Deployment)** | 负责管理无状态应用的<br/>工作负载                 | 最常用；自动创建 ReplicaSet 与容器组，支持水平扩缩容 |
| **有状态副本集 (StatefulSet)** | 管理有状态应用程序的<br/>工作负载，如数据库、分布式<br/>存储、缓存集群 | 保证容器组顺序启动 / 终止，提供固定网络标识与持久化存储   |
| **守护进程集 (DaemonSet)** | 节点级监控、日志收集、GPU <br/>驱动等             | 每个节点 1 个容器组，随节点自动增删             |


### 查看工作负载

查看工作负载步骤如下：
![工作负载](/images/zh/manual/olares/controlhub-workload.png#bordered)

1. 左侧导航点击**浏览**，并在第一列**命名空间**树中根据应用或服务选择目标命名空间。
2. 在第二列**部署/有状态副本集/守护进程集**列表里逐级点击目标工作负载。
3. 在第三列查看工作负载详情：
    
    | 区块 | 信息与用途                                            |
    |------|--------------------------------------------------|
    | **基本信息** | 集群、项目、创建 / 更新时间、创建者等元数据                          |
    | **容器组** | 列出关联容器组的节点、IP、CPU / 内存实时曲线，可点击进入容器组详情            |
    | **端口** | 工作负载容器组暴露的容器端口、协议与监听端口号                          |
    | **环境变量** | Pod 模板中定义的环境变量列表                                 |
    | **标签** | 配置在工作负载元数据中，用于资源调度与筛选                            |
    | **注解** | 定义于 `metadata.annotations`，功能类似于标签，便于控制器灵活管理工作负载 |
    | **事件** | 最近 1 小时内与该工作负载相关的调度、重启、拉取镜像等事件                   |

### 编辑 YAML 配置

在某些高级运维场景下，你可能需要直接调整部署副本数、添加环境变量、修改探针或更新存储卷声明等。此时可通过**编辑 YAML** 功能对工作负载进行精细化配置。

:::warning 警告
直接修改系统资源 YAML 可能影响集群稳定性和性能，请务必谨慎操作，并确保已做好备份或在专业人员指导下进行。
:::

1. 在工作负载详情页面左上角点击 <i class="material-symbols-outlined">edit_square</i> 按钮。
2. 在弹出的 YAML 编辑器中修改配置。
3. 点击**确认**，系统立即应用新的配置。

![编辑 YAML](/images/how-to/olares/controlhub/browse/10.jpg#bordered)

### 停止或重启工作负载

当需要快速应用或服务排障、释放系统资源或重新加载配置时，可使用**停止**/**开始**和**重启**功能。

| 功能        | 说明                                                                       |
|-----------|--------------------------------------------------------------------------|
| **停止/开始** | 将副本数缩减至 0，容器组将全部终止。如需恢复需手动点击 **重启** <br/>或通过[修改 YAML](#编辑-YAML-配置) 调整副本数。 |
| **重启**    | 先停止后立即按照原副本数拉起新的容器组，用于快速刷新配置<br/>或排除瞬时故障。                                |

1. 在工作负载详情页面右上角点击**停止**或**重启**按钮。
2. 在弹出确认框中，按提示输入容器组名称，并点击**确定**。
3. 通过详情面板中的容器组列表，观察副本终止/启动进度，确认状态恢复正常。

## 监控集群资源使用

在控制面板中，集群监控可以通过以下两种视图：

| 视图 | 适用场景                    | 价值 |
|------|-------------------------|------|
| **命名空间视图** | 需要横向对比多个应用或<br/>系统模块的资源占用时   | 汇总同一命名空间的 CPU / 内存 / 流量等关键指标，快速定位资源热点，评估配额使用率 |
| **容器组视图** | 需要纵向深入到单个 Pod <br/>进行排障或性能分析时 | 实时查看每个容器组及其内部容器的状态、资源曲线与事件日志，实现精细化运维 |

通过**命名空间视图**先定位“谁”占用过多资源，再用**容器组视图**精细排查“具体哪个 Pod/容器”导致瓶颈，实现从全局到细节的监控与运维。

### 命名空间视图

命名空间视图按命名空间维度汇总 CPU、内存与流量等关键指标，让你快速发现资源热点、对比已用配额，从而高效完成性能调优与故障排查。
![命名空间](/images/zh/manual/olares/controlhub-namespace.png#bordered)

1. 在左侧导航点击**命名空间**。
2. 通过顶部下拉框切换不同用户的命名空间，或在搜索框中输入关键字精准查找。

| 列               | 说明 |
|------------------|------|
| **命名空间**      | 命名空间名称 |
| **CPU 用量**      | 当前 CPU 使用量（支持列头排序） |
| **内存用量**      | 当前内存使用量（支持排序） |
| **容器组**        | 该命名空间中运行的 Pod 数量 |
| **流出流量**      | 出站流量速率 |
| **流入流量**      | 入站流量速率 |

点击任一命名空间行可进入其资源详情页：

| 区域          | 说明 |
|---------------|------|
| **配额卡片**   | CPU / Memory 已用百分比 |
| **容器组列表** | 支持按名称搜索，并可按 CPU / 内存使用率排序 |
| **容器条目**   | 查看创建时间、节点、IP 以及实时资源曲线 |

### 查看容器组

**容器组**视图聚合展示了集群内所有 Pod 的运行状态与资源使用情况，支持按命名空间、状态过滤及搜索。
![容器组](/images/zh/manual/olares/controlhub-pods-list.png#bordered)

| 列          | 说明                 |
|------------|--------------------|
| **名称**     | 容器组名称              |
| **状态**     | 运行中 / 已完成 / 异常 /错误 |
| **节点**     | 容器组所在节点及其内网 IP     |
| **容器组 IP** | 容器组 IP             |
| **创建时间**   | 可升 / 降序排序          |

点击特定容器组名称以进入[容器组详情](manage-container.md#查看容器组详情)页面。

### 查看资源趋势
控制面板提供了两种不同维度的图表来监控实时和历史资源趋势，帮助你从快速评估资源使用情况。

- **按用户查看**：在**命名空间** > **资源**选项卡下，你可以查看特定用户的整体 CPU、内存和容器组数量动态，能够帮你快速评估单个用户在特定时间段内的资源占用情况。

- **按集群查看**：在 **容器组** > **资源**选项卡下，你可以从集群层面查看整体 CPU、内存、存储和 容器组数量动态，为你提供对集群资源趋势和健康状况清晰、高层次的概览。